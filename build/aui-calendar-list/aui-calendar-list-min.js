AUI.add("aui-calendar-list",function(t){var k=t.Lang,n=k.isArray,m=k.isObject,D=t.Array,z=".",j="",I=" ",w="+",g="active",u="arrow",H="blank",i="calendar-list",F="calendars",d="click",e="color",q="contentBox",y="hidden",p="hover",c="item",G="label",a="rendered",C="simpleMenu",h="style",v="visible",E=t.getClassName,x=E(i,c),o=E(i,c,g),f=E(i,c,u),B=E(i,c,e),b=E(i,c,p),s=E(i,c,G),r=new t.Template('<tpl for="calendars">','<div class="',x,'">','<div class="',B,'" {[ parent.calendars[$i].get("visible") ? ',"'style=\"background-color:'",w,'parent.calendars[$i].get("color")',w,'";border-color:"',w,'parent.calendars[$i].get("color")',w,'";\\""'," : '",j,"' ]}></div>",'<span class="',s,'">{[ parent.calendars[$i].get("name") ]}</span>','<div href="javascript:;" class="',f,'"></div>',"</div>","</tpl>");var l=t.Component.create({NAME:i,ATTRS:{calendars:{setter:"_setCalendars",validator:n,value:[]},simpleMenu:{setter:"_setSimpleMenu",validator:m,value:null}},UI_ATTRS:[F],prototype:{initializer:function(){var A=this;A.simpleMenu=new t.SimpleMenu(A.get(C));},bindUI:function(){var A=this;var J=A.get(q);A.on("scheduler-calendar:colorChange",t.bind(A._onCalendarColorChange,A));A.on("scheduler-calendar:visibleChange",t.bind(A._onCalendarVisibleChange,A));A.on("simple-menu:visibleChange",t.bind(A._onSimpleMenuVisibleChange,A));J.delegate(d,t.bind(A._onClick,A),z+x);J.delegate(p,t.bind(A._onHoverOver,A),t.bind(A._onHoverOut,A),z+x);},renderUI:function(){var A=this;A._renderCalendars();A.simpleMenu.render();},_clearCalendarColor:function(L){var A=this;var K=A._getCalendarNode(L);var J=K.one(z+B);J.removeAttribute(h);},_getCalendarByNode:function(J){var A=this;var K=A.get(F);return K[A.items.indexOf(J)];},_getCalendarNode:function(J){var A=this;var K=A.get(F);return A.items.item(D.indexOf(K,J));},_onCalendarColorChange:function(J){var A=this;var K=J.target;if(K.get(v)){A._setCalendarColor(K,J.newVal);}},_onCalendarVisibleChange:function(J){var A=this;var K=J.target;if(J.newVal){A._setCalendarColor(K,K.get(e));}else{A._clearCalendarColor(K);}},_onClick:function(K){var A=this;var M=K.target;if(M.hasClass(f)){if(A.activeNode){A.activeNode.removeClass(o);}A.activeNode=K.currentTarget;A.activeItem=A._getCalendarByNode(A.activeNode);A.activeNode.addClass(o);var J=A.simpleMenu;J.setAttrs({"align.node":M,visible:J.get("align.node")!==M||!J.get(v)});K.stopPropagation();}else{var L=A._getCalendarByNode(K.currentTarget);L.set(v,!L.get(v));}},_onHoverOver:function(J){var A=this;var L=J.currentTarget;var K=A._getCalendarByNode(L);A._setCalendarColor(K,K.get(e));L.addClass(b);},_onHoverOut:function(J){var A=this;var L=J.currentTarget;var K=A._getCalendarByNode(L);if(!K.get(v)){A._clearCalendarColor(K);}L.removeClass(b);},_onSimpleMenuVisibleChange:function(J){var A=this;if(A.activeNode&&!J.newVal){A.activeNode.removeClass(o);}},_renderCalendars:function(){var A=this;A.items=t.NodeList.create(r.parse({calendars:A.get(F)}));A.get(q).setContent(A.items);},_setCalendarColor:function(L,M){var A=this;var K=A._getCalendarNode(L);var J=K.one(z+B);J.setStyles({backgroundColor:M,borderColor:M});},_setCalendars:function(J){var A=this;D.each(J,function(K){K.addTarget(A);});return J;},_setSimpleMenu:function(J){var A=this;return t.merge({align:{points:[t.WidgetPositionAlign.TL,t.WidgetPositionAlign.BL]},items:[],plugins:[t.Plugin.OverlayAutohide],bubbleTargets:[A],visible:false,width:290,zIndex:500},J||{});},_uiSetCalendars:function(J){var A=this;if(A.get(a)){A._renderCalendars();}}}});t.CalendarList=l;},"@VERSION@",{skinnable:true,requires:["aui-scheduler","aui-template"]});