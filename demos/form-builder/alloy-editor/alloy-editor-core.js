!function(){"use strict";CKEDITOR.tools.debounce=CKEDITOR.tools.debounce||function(e,t,o,n){var r,i=function(){var i=o||this;clearTimeout(r);for(var a=[],l=arguments.length,s=0;l>s;++s)a.push(arguments[s]);var u=a.concat(n||[]);r=setTimeout(function(){e.apply(i,u)},t)};return i.detach=function(){clearTimeout(r)},i}}(),function(){"use strict";function e(e){this._editor=e}e.prototype={constructor:e,create:function(e,t){var o=this._editor.getSelection(),n=o.getRanges()[0];if(n.collapsed){var r=new CKEDITOR.dom.text(e,this._editor.document);n.insertNode(r),n.selectNodeContents(r)}var i=CKEDITOR.tools.merge({"data-cke-saved-href":e,href:e},t),a=new CKEDITOR.style({attributes:i,element:"a"});a.type=CKEDITOR.STYLE_INLINE,a.applyToRange(n,this._editor),n.select()},getFromSelection:function(){var e=this._editor.getSelection(),t=e.getSelectedElement();if(t&&t.is("a"))return t;var o=e.getRanges()[0];return o?(o.shrink(CKEDITOR.SHRINK_TEXT),this._editor.elementPath(o.getCommonAncestor()).contains("a",1)):null},remove:function(e){var t=this._editor;if(e)e.remove(t);else{var o=e||new CKEDITOR.style({alwaysRemoveElement:1,element:"a",type:CKEDITOR.STYLE_INLINE}),n=t.getSelection();n.selectElement(n.getStartElement()),t.removeStyle(o)}},update:function(e,t){var o=t||this.getFromSelection();o.setAttributes({"data-cke-saved-href":e,href:e})}},CKEDITOR.Link=CKEDITOR.Link||e}(),function(){"use strict";function e(){}CKEDITOR.plugins.get("selectionregion")||(CKEDITOR.SELECTION_TOP_TO_BOTTOM=0,CKEDITOR.SELECTION_BOTTOM_TO_TOP=1,CKEDITOR.SELECTION_LEFT_TO_RIGHT=2,CKEDITOR.SELECTION_RIGHT_TO_LEFT=3,e.prototype={constructor:e,createSelectionFromPoint:function(e,t){this.createSelectionFromRange(e,t,e,t)},createSelectionFromRange:function(e,t,o,n){var r,i,a,l,s,u,c;if("function"==typeof document.caretPositionFromPoint?(s=document.caretPositionFromPoint(e,t),r=document.caretPositionFromPoint(o,n),u=s.offsetNode,i=r.offsetNode,c=s.offset,a=r.offset,l=this.createRange()):"function"==typeof document.caretRangeFromPoint&&(s=document.caretRangeFromPoint(e,t),r=document.caretRangeFromPoint(o,n),u=s.startContainer,i=r.startContainer,c=s.startOffset,a=r.startOffset,l=this.createRange()),l&&document.getSelection)l.setStart(new CKEDITOR.dom.node(u),c),l.setEnd(new CKEDITOR.dom.node(i),a),this.getSelection().selectRanges([l]);else if("function"==typeof document.body.createTextRange){var d=this.getSelection();d.unlock(),l=document.body.createTextRange(),l.moveToPoint(e,t);var g=l.duplicate();g.moveToPoint(o,n),l.setEndPoint("EndToEnd",g),l.select(),this.getSelection().lock()}},getCaretRegion:function(){var e=this.getSelection(),t=e.createBookmarks(),o=t[0].startNode.$;o.style.display="inline-block";var n=new CKEDITOR.dom.element(o).getClientRect();o.parentNode.removeChild(o);var r=new CKEDITOR.dom.window(window).getScrollPosition();return{bottom:r.y+n.bottom,left:r.x+n.left,right:r.x+n.right,top:r.y+n.top}},getSelectionData:function(){var e=this.getSelection(),t={element:e.getSelectedElement(),text:e.getSelectedText()};return t.region=this.getSelectionRegion(e),t},getSelectionRegion:function(){var e=this.getClientRectsRegion();return e.direction=this.getSelectionDirection(),e.height=e.bottom-e.top,e.width=e.right-e.left,e},isSelectionEmpty:function(){var e,t=this.getSelection();return t.getType()===CKEDITOR.SELECTION_NONE||(e=t.getRanges())&&1===e.length&&e[0].collapsed},getClientRectsRegion:function(){var e,t,o=this.getSelection(),n=o.getNative();if(n.createRange){var r=n.createRange();t=r.getClientRects()}else e=n.rangeCount,t=n.rangeCount>0?n.getRangeAt(0).getClientRects():[];var i,a=0,l=1/0,s=-1/0,u=1/0;if(0===t.length)i=this.getCaretRegion();else{for(var c=0,d=t.length;d>c;c++){var g=t[c];g.left<l&&(l=g.left),g.right>s&&(s=g.right),g.top<u&&(u=g.top),g.bottom>a&&(a=g.bottom)}var f=new CKEDITOR.dom.window(window).getScrollPosition();if(i={bottom:f.y+a,left:f.x+l,right:f.x+s,top:f.y+u},t.length){var b=t[t.length-1],h=t[0];i.endRect={bottom:f.y+b.bottom,height:b.height,left:f.x+b.left,right:f.x+b.right,top:f.y+b.top,width:b.width},i.startRect={bottom:f.y+h.bottom,height:h.height,left:f.x+h.left,right:f.x+h.right,top:f.y+h.top,width:h.width}}}return i},getSelectionDirection:function(){var e,t=this.getSelection(),o=t.getNative(),n=CKEDITOR.SELECTION_TOP_TO_BOTTOM;if((e=o.anchorNode)&&e.compareDocumentPosition){var r=e.compareDocumentPosition(o.focusNode);(!r&&o.anchorOffset>o.focusOffset||r===Node.DOCUMENT_POSITION_PRECEDING)&&(n=CKEDITOR.SELECTION_BOTTOM_TO_TOP)}return n}},CKEDITOR.plugins.add("selectionregion",{init:function(t){var o,n;n=Object.prototype.hasOwnProperty;for(o in e.prototype)n.call(e.prototype,o)&&"undefined"==typeof t[o]&&(t[o]=e.prototype[o])}}))}(),function(){"use strict";CKEDITOR.tools.merge=CKEDITOR.tools.merge||function(){for(var e={},t=0;t<arguments.length;++t){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},CKEDITOR.tools.simulate=function(e,t){var o=document.createEvent("Events");o.initEvent(t,!0,!1),e.dispatchEvent(o)}}(),function(){"use strict";CKEDITOR.plugins.get("uicore")||CKEDITOR.plugins.add("uicore",{init:function(e){var t,o,n,r,i=[];t=this._createAriaElement(e.id),r=e.config.uicore?e.config.uicore.timeout:50,o=CKEDITOR.tools.debounce(function(){t.innerHTML=i.join(". ")},r),n=CKEDITOR.tools.debounce(function(t){i=[],("keyup"!==t.name||27!==t.data.$.keyCode||e.config.allowEsc)&&e.fire("editorInteraction",{nativeEvent:t.data.$,selectionData:e.getSelectionData()})},r),e.on("ariaUpdate",function(e){i.push(e.data.message),o()}),e.on("contentDom",function(){var t=e.editable();t.attachListener(t,"mouseup",n),t.attachListener(t,"keyup",n)}),e.on("destroy",function(){n.detach()})},_createAriaElement:function(e){var t;return t=document.createElement("div"),t.className="sr-only",t.setAttribute("aria-live","polite"),t.setAttribute("role","status"),t.setAttribute("id",e+"LiveRegion"),document.body.appendChild(t),t}})}(),CKEDITOR.disableAutoInline=!0,YUI.add("alloy-editor",function(e){"use strict";var t,o=e.Lang,n=27,r=121,i=9;t=e.Base.create("alloyEditor",e.Base,[],{initializer:function(t){var o,n,r,i,a,l,s;a=this.get("srcNode"),n=CKEDITOR.inline(a.getDOMNode()),n.config.allowedContent=this.get("allowedContent"),n.config.toolbars=this.get("toolbars"),n.config.removePlugins=this.get("removePlugins"),n.config.extraPlugins=this.get("extraPlugins"),n.config.placeholderClass=this.get("placeholderClass"),n.config.pasteFromWordRemoveStyles=!1,n.config.pasteFromWordRemoveFontStyles=!1,e.mix(n.config,t),this._editor=n,i=this.get("eventsDelay"),l=CKEDITOR.tools.debounce(this._onDocInteract,i,this),s=CKEDITOR.tools.debounce(this._onEditorKey,i,this),r=e.one(e.config.doc).on(["click","keydown"],l),o=a.on("keydown",s),this._eventHandles=[l,s,r,o],n.on("toolbarKey",this._onToolbarKey,this),n.on("toolbarActive",this._onToolbarActive,this),n.on("afterCommandExec",this._returnFocusToToolbar,this)},destructor:function(){var t;t=CKEDITOR.instances[this.get("srcNode").get("id")],t&&(e.Object.each(t.config.toolbars,function(e){e.destroy()}),t.destroy()),new e.EventHandle(this._eventHandles).detach()},_focusNextToolbar:function(){var t,o,n,r;t=this._activeToolbar,r=this._editor.config.toolbars,r=e.Object.keys(r).map(function(e){return r[e]}),o=e.Array.indexOf(r,t),n=r.splice(o),r=n.concat(r),e.Array.some(r,function(e){return e!==t&&e.focus()?(this._activeToolbar=e,this._focusedToolbar=e,!0):void 0},this)},_focusVisibleToolbar:function(t){e.Object.some(this._editor.config.toolbars,function(e){return e!=this._activeToolbar&&e.focus(t)?(this._activeToolbar=e,this._focusedToolbar=e,e.get("visible")):void 0},this)},_getNativeEditor:function(){return this._editor},_hideToolbars:function(){e.Object.each(this._editor.config.toolbars,function(e){e.hide()})},_onDocInteract:function(t){var o,n,r;r=this.get("srcNode"),n=r===t.target||r.contains(t.target),o=CKEDITOR.instances[r.get("id")],n=n||e.some(o.config.toolbars,function(e){return e.ownsNode(t.target)}),n||this._editor.fire("toolbarsHide")},_onEditorKey:function(e){e.altKey&&e.keyCode===r?this._focusVisibleToolbar():e.keyCode===n&&this._hideToolbars()},_onToolbarActive:function(e){this._activeToolbar=e.data},_onToolbarKey:function(e){e.data.keyCode===i?(e.data.preventDefault(),this._focusNextToolbar()):e.data.keyCode===n&&(this._activeToolbar.blur(),this._activeToolbar=null,this._focusedToolbar=null,this._hideToolbars())},_returnFocusToToolbar:function(){var e=this._focusedToolbar;if(e){var t=e.getActiveButton();this._focusVisibleToolbar(t)}},_validateAllowedContent:function(e){return o.isString(e)||o.isObject(e)||o.isBoolean(e)},_validateToolbars:function(e){return""===e||o.isObject(e)||o.isNull(e)}},{ATTRS:{allowedContent:{validator:"_validateAllowedContent",value:!0,writeOnce:!0},eventsDelay:{validator:o.isNumber,value:100},extraPlugins:{validator:o.isString,value:"uicore,selectionregion,dropimages,placeholder,linktooltip,uiloader",writeOnce:!0},nativeEditor:{getter:"_getNativeEditor",readOnly:!0},placeholderClass:{validator:o.isString,value:"alloy-editor-placeholder",writeOnce:!0},removePlugins:{validator:o.isString,value:"contextmenu,toolbar,elementspath,resize,liststyle,tabletools,link",writeOnce:!0},srcNode:{setter:e.one,writeOnce:!0},toolbars:{validator:"_validateToolbars",value:{add:["image"],image:["left","right"],styles:["strong","em","u","h1","h2","a","twitter"]}},uiNode:{setter:e.one}}}),e.AlloyEditor=t},"",{requires:["base-build","node-base"]}),function(){"use strict";if(!CKEDITOR.plugins.get("autolink")){/MSIE ([^;]*)|Trident.*; rv:([0-9.]+)/.test(navigator.userAgent)&&document.execCommand("AutoUrlDetect",!1,!1);var e=8,t=188,o=13,n=186,r=32,i=[t,o,n,r],a=/[^\s]+/gm,l=/(https?\:\/\/|www\.)(-\.)?([^\s/?\.#-]+\.?)+(\/[^\s]*)?$/i;CKEDITOR.plugins.add("autolink",{init:function(e){this._editor=e;var t=e.editable();t.attachListener(t,"keyup",this._onKeyUp,this)},_getLastWord:function(){var e=this._editor.getSelection().getRanges()[0],t=e.startOffset,n="";if(this._currentKeyCode===o){var r,i=e.startContainer.getPrevious();if(i)for(r=i.getLast();r&&!r.getText();)r=r.getPrevious();r&&r.$.href||(this._startContainer=r,n=r?r.getText():"",this._offset=n.length)}else this._startContainer=e.startContainer,n=this._startContainer.getText().substring(0,t-1),this._offset=t-1;var l="",s=n.match(a);return s&&(l=s.pop()),l},_isValidURL:function(e){return l.test(e)},_onKeyDown:function(t){var o=t.data.$,n=this._editor.editable();n.removeListener("keydown",this._onKeyDown),o.keyCode===e&&(t.cancel(),t.data.preventDefault(),this._removeLink()),this._ckLink=null},_onKeyUp:function(e){var t=e.data.$;if(this._currentKeyCode=t.keyCode,-1!==i.indexOf(this._currentKeyCode)){var o=this._getLastWord();this._isValidURL(o)&&this._replaceContentByLink(o)}},_replaceContentByLink:function(e){var t=this._editor.createRange(),n=CKEDITOR.dom.element.get(this._startContainer),r=this._offset;t.setStart(n,r-e.length),t.setEnd(n,r),t.select();var i=new CKEDITOR.Link(this._editor);i.create(e),this._ckLink=i,this._subscribeToKeyEvent(),t=this._editor.getSelection().getRanges()[0],this._currentKeyCode===o?(t.setEnd(t.getNextEditableNode(),0),t.setStart(t.getNextEditableNode(),0)):(t.setEnd(t.getNextNode(),1),t.setStart(t.getNextNode(),1)),t.select()},_removeLink:function(){var e=this._editor.getSelection().getRanges()[0],t=e.startOffset,o=this._startContainer.getNext()||this._startContainer,n=this._editor.createRange();n.setStart(o,0),n.setEndAfter(o),n.select(),this._ckLink.remove(),e.setEnd(e.startContainer,t),e.setStart(e.startContainer,t),e.select()},_subscribeToKeyEvent:function(){var e=this._editor.editable();e.attachListener(e,"keydown",this._onKeyDown,this,{},1)}})}}(),function(){"use strict";var e=CKEDITOR.env.ie;CKEDITOR.plugins.get("dropimages")||CKEDITOR.plugins.add("dropimages",{init:function(e){var t;t=e.editable(e.element.$),t.attachListener(t,"dragenter",this._onDragEnter,this,{editor:e}),t.attachListener(t,"dragover",this._onDragOver,this,{editor:e}),t.attachListener(t,"drop",this._onDragDrop,this,{editor:e})},_handleFiles:function(e,t){var o,n,r;for(o=0;o<e.length;o++)r=e[o],n=/image.*/,r.type.match(n)&&this._processFile(r,t);return!1},_onDragEnter:function(t){e&&this._preventEvent(t)},_onDragOver:function(t){e&&this._preventEvent(t)},_onDragDrop:function(e){var t,o;o=e.data.$,new CKEDITOR.dom.event(o).preventDefault(),t=e.listenerData.editor,e.listenerData.editor.createSelectionFromPoint(o.clientX,o.clientY),this._handleFiles(o.dataTransfer.files,t)},_preventEvent:function(e){e=new CKEDITOR.dom.event(e.data.$),e.preventDefault(),e.stopPropagation()},_processFile:function(e,t){var o=new FileReader;o.addEventListener("loadend",function(){var n,r,i;n=o.result,r=CKEDITOR.dom.element.createFromHtml('<img src="'+n+'">'),t.insertElement(r),i={el:r,file:e},t.fire("imagedrop",i)}),o.readAsDataURL(e)}})}(),function(){"use strict";CKEDITOR.plugins.get("placeholder")||CKEDITOR.plugins.add("placeholder",{init:function(e){e.on("blur",this._onBlur,this)},_onBlur:function(e){var t,o;t=e.editor,""===t.getData()&&(o=new CKEDITOR.dom.element(t.element.$),o.setHtml(""),o.addClass(t.config.placeholderClass))}})}(),function(){function e(e){return CKEDITOR.env.ie?e.$.clientWidth:parseInt(e.getComputedStyle("width"),10)}function t(e,t){var o=e.getComputedStyle("border-"+t+"-width"),n={thin:"0px",medium:"1px",thick:"2px"};return o.indexOf("px")<0&&(o=o in n&&"none"!=e.getComputedStyle("border-style")?n[o]:0),parseInt(o,10)}function o(e){for(var t,o,n,r=e.$.rows,i=0,a=0,l=r.length;l>a;a++)n=r[a],t=n.cells.length,t>i&&(i=t,o=n);return o}function n(e){for(var n=[],r=-1,i="rtl"===e.getComputedStyle("direction"),a=o(e),l=new CKEDITOR.dom.element(e.$.tBodies[0]),s=l.getDocumentPosition(),u=0,c=a.cells.length;c>u;u++){var d=new CKEDITOR.dom.element(a.cells[u]),g=a.cells[u+1]&&new CKEDITOR.dom.element(a.cells[u+1]);r+=d.$.colSpan||1;var f,b,h,m=d.getDocumentPosition().x;i?b=m+t(d,"left"):f=m+d.$.offsetWidth-t(d,"right"),g?(m=g.getDocumentPosition().x,i?f=m+g.$.offsetWidth-t(g,"right"):b=m+t(g,"left")):(m=e.getDocumentPosition().x,i?f=m:b=m+e.$.offsetWidth),h=Math.max(b-f,4),n.push({table:e,index:r,x:f,y:s.y,width:h,height:l.$.offsetHeight,rtl:i})}return n}function r(e,t){for(var o=0,n=e.length;n>o;o++){var r=e[o];if(t>=r.x&&t<=r.x+r.width)return r}return null}function i(e){(e.data||e).preventDefault()}function a(o){function n(){g=null,p=0,h=0,f.removeListener("mouseup",c),b.removeListener("mousedown",u),b.removeListener("mousemove",d),f.getBody().setStyle("cursor","auto")}function r(){for(var t=g.index,o=CKEDITOR.tools.buildTableMap(g.table),n=[],r=[],a=Number.MAX_VALUE,l=a,s=g.rtl,u=0,c=o.length;c>u;u++){var _=o[u],I=_[t+(s?1:0)],O=_[t+(s?0:1)];I=I&&new CKEDITOR.dom.element(I),O=O&&new CKEDITOR.dom.element(O),I&&O&&I.equals(O)||(I&&(a=Math.min(a,e(I))),O&&(l=Math.min(l,e(O))),n.push(I),r.push(O))}T=n,v=r,E=g.x-a,C=g.x+l,b.setOpacity(.5),m=parseInt(b.getStyle("left"),10),p=0,h=1,b.on("mousemove",d),f.on("dragstart",i)}function a(){h=0,b.setOpacity(0),p&&l();var e=g.table;setTimeout(function(){e.removeCustomData("_cke_table_pillars")},0),f.removeListener("dragstart",i)}function l(){for(var o=g.rtl,n=o?v.length:T.length,r=0;n>r;r++){var i=T[r],a=v[r],l=g.table;CKEDITOR.tools.setTimeout(function(e,t,n,r,i,a){e&&e.setStyle("width",s(Math.max(t+a,1))),n&&n.setStyle("width",s(Math.max(r-a,1))),i&&l.setStyle("width",s(i+a*(o?-1:1)))},0,this,[i,i&&e(i),a,a&&e(a),(!i||!a)&&e(l)+t(l,"left")+t(l,"right"),p])}}function u(e){i(e),r(),f.on("mouseup",c,this)}function c(e){e.removeListener(),a()}function d(e){_(e.data.getPageOffset().x)}var g,f,b,h,m,p,T,v,E,C;f=o.document,b=CKEDITOR.dom.element.createFromHtml('<div data-cke-temp=1 contenteditable=false unselectable=on style="position:absolute;cursor:col-resize;filter:alpha(opacity=0);opacity:0;padding:0;background-color:#004;background-image:none;border:0px none;z-index:10"></div>',f),o.on("destroy",function(){b.remove()}),f.getDocumentElement().append(b),this.attachTo=function(e){h||(g=e,b.setStyles({width:s(e.width),height:s(e.height),left:s(e.x),top:s(e.y)}),b.on("mousedown",u,this),f.getBody().setStyle("cursor","col-resize"),b.show())};var _=this.move=function(e){if(!g)return 0;if(!h&&(e<g.x||e>g.x+g.width))return n(),0;var t=e-Math.round(b.$.offsetWidth/2);if(h){if(t===E||t===C)return 1;t=Math.max(t,E),t=Math.min(t,C),p=t-m}return b.setStyle("left",s(t)),1}}function l(e){var t=e.data.getTarget();if("mouseout"===e.name){if(!t.is("table"))return;for(var o=new CKEDITOR.dom.element(e.data.$.relatedTarget||e.data.$.toElement);o&&o.$&&!o.equals(t)&&!o.is("body");)o=o.getParent();if(!o||o.equals(t))return}t.getAscendant("table",1).removeCustomData("_cke_table_pillars"),e.removeListener()}var s=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("tableresize",{requires:"tabletools",init:function(e){e.on("contentDom",function(){var t,o=e.editable();o.attachListener(o.isInline()?o:e.document,"mousemove",function(o){o=o.data;var s=o.getTarget();if(s.type===CKEDITOR.NODE_ELEMENT){var u=o.getPageOffset().x;if(t&&t.move(u))return void i(o);var c,d;if((s.is("table")||s.getAscendant("tbody",1))&&(c=s.getAscendant("table",1),e.editable().contains(c))){(d=c.getCustomData("_cke_table_pillars"))||(c.setCustomData("_cke_table_pillars",d=n(c)),c.on("mouseout",l),c.on("mousedown",l));var g=r(d,u);g&&(!t&&(t=new a(e)),t.attachTo(g))}}})})}})}(),function(){function e(e){function t(e){n.length>0||e.type==CKEDITOR.NODE_ELEMENT&&p.test(e.getName())&&!e.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(r,e,"selected_cell",!0),n.push(e))}for(var o=e.getRanges(),n=[],r={},i=0;i<o.length;i++){var a=o[i];if(a.collapsed){var l=a.getCommonAncestor(),s=l.getAscendant("td",!0)||l.getAscendant("th",!0);s&&n.push(s)}else{var u,c=new CKEDITOR.dom.walker(a);for(c.guard=t;u=c.next();)if(u.type!=CKEDITOR.NODE_ELEMENT||!u.is(CKEDITOR.dtd.table)){var d=u.getAscendant("td",!0)||u.getAscendant("th",!0);d&&!d.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(r,d,"selected_cell",!0),n.push(d))}}}return CKEDITOR.dom.element.clearAllMarkers(r),n}function t(e){for(var t,o,n,r=0,i=e.length-1,a={};t=e[r++];)CKEDITOR.dom.element.setMarker(a,t,"delete_cell",!0);for(r=0;t=e[r++];)if((o=t.getPrevious())&&!o.getCustomData("delete_cell")||(o=t.getNext())&&!o.getCustomData("delete_cell"))return CKEDITOR.dom.element.clearAllMarkers(a),o;return CKEDITOR.dom.element.clearAllMarkers(a),n=e[0].getParent(),(n=n.getPrevious())?n.getLast():(n=e[i].getParent(),(n=n.getNext())?n.getChild(0):null)}function o(t,o){for(var n=e(t),r=n[0],i=r.getAscendant("table"),a=r.getDocument(),l=n[0].getParent(),s=l.$.rowIndex,u=n[n.length-1],c=u.getParent().$.rowIndex+u.$.rowSpan-1,d=new CKEDITOR.dom.element(i.$.rows[c]),g=o?s:c,f=o?l:d,b=CKEDITOR.tools.buildTableMap(i),h=b[g],m=o?b[g-1]:b[g+1],p=b[0].length,T=a.createElement("tr"),v=0;h[v]&&p>v;v++){var E;h[v].rowSpan>1&&m&&h[v]==m[v]?(E=h[v],E.rowSpan+=1):(E=new CKEDITOR.dom.element(h[v]).clone(),E.removeAttribute("rowSpan"),E.appendBogus(),T.append(E),E=E.$),v+=E.colSpan-1}o?T.insertBefore(f):T.insertAfter(f)}function n(t){if(t instanceof CKEDITOR.dom.selection){for(var o=e(t),r=o[0],i=r.getAscendant("table"),a=CKEDITOR.tools.buildTableMap(i),l=o[0].getParent(),s=l.$.rowIndex,u=o[o.length-1],c=u.getParent().$.rowIndex+u.$.rowSpan-1,d=[],g=s;c>=g;g++){for(var f=a[g],b=new CKEDITOR.dom.element(i.$.rows[g]),h=0;h<f.length;h++){var m=new CKEDITOR.dom.element(f[h]),p=m.getParent().$.rowIndex;if(1==m.$.rowSpan)m.remove();else if(m.$.rowSpan-=1,p==g){var T=a[g+1];T[h-1]?m.insertAfter(new CKEDITOR.dom.element(T[h-1])):new CKEDITOR.dom.element(i.$.rows[g+1]).append(m,1)}h+=m.$.colSpan-1}d.push(b)}var v=i.$.rows,E=new CKEDITOR.dom.element(v[c+1]||(s>0?v[s-1]:null)||i.$.parentNode);for(g=d.length;g>=0;g--)n(d[g]);return E}return t instanceof CKEDITOR.dom.element&&(i=t.getAscendant("table"),1==i.$.rows.length?i.remove():t.remove()),null}function r(e,t){for(var o=e.getParent(),n=o.$.cells,r=0,i=0;i<n.length;i++){var a=n[i];if(r+=t?1:a.colSpan,a==e.$)break}return r-1}function i(e,t){for(var o=t?1/0:0,n=0;n<e.length;n++){var i=r(e[n],t);(t?o>i:i>o)&&(o=i)}return o}function a(t,o){for(var n=e(t),r=n[0],a=r.getAscendant("table"),l=i(n,1),s=i(n),u=o?l:s,c=CKEDITOR.tools.buildTableMap(a),d=[],g=[],f=c.length,b=0;f>b;b++){d.push(c[b][u]);var h=o?c[b][u-1]:c[b][u+1];g.push(h)}for(b=0;f>b;b++){var m;d[b]&&(d[b].colSpan>1&&g[b]==d[b]?(m=d[b],m.colSpan+=1):(m=new CKEDITOR.dom.element(d[b]).clone(),m.removeAttribute("colSpan"),m.appendBogus(),m[o?"insertBefore":"insertAfter"].call(m,new CKEDITOR.dom.element(d[b])),m=m.$),b+=m.rowSpan-1)}}function l(t){for(var o,n,r=e(t),i=r[0],a=r[r.length-1],l=i.getAscendant("table"),s=CKEDITOR.tools.buildTableMap(l),u=[],c=0,d=s.length;d>c;c++)for(var g=0,f=s[c].length;f>g;g++)s[c][g]==i.$&&(o=g),s[c][g]==a.$&&(n=g);for(c=o;n>=c;c++)for(g=0;g<s.length;g++){var b=s[g],h=new CKEDITOR.dom.element(l.$.rows[g]),m=new CKEDITOR.dom.element(b[c]);m.$&&(1==m.$.colSpan?m.remove():m.$.colSpan-=1,g+=m.$.rowSpan-1,h.$.cells.length||u.push(h))}var p=l.$.rows[0]&&l.$.rows[0].cells,T=new CKEDITOR.dom.element(p[o]||(o?p[o-1]:l.$.parentNode));return u.length==d&&l.remove(),T}function s(e,t){var o=e.getStartElement(),n=o.getAscendant("td",1)||o.getAscendant("th",1);if(n){var r=n.clone();r.appendBogus(),t?r.insertBefore(n):r.insertAfter(n)}}function u(o){if(o instanceof CKEDITOR.dom.selection){for(var n=e(o),r=n[0]&&n[0].getAscendant("table"),i=t(n),a=n.length-1;a>=0;a--)u(n[a]);i?d(i,!0):r&&r.remove()}else if(o instanceof CKEDITOR.dom.element){var l=o.getParent();1==l.getChildCount()?l.remove():o.remove()}}function c(e){var t=e.getBogus();t&&t.remove(),e.trim()}function d(e,t){var o=e.getDocument(),n=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(n.focus(),o.focus());var r=new CKEDITOR.dom.range(o);r["moveToElementEdit"+(t?"End":"Start")](e)||(r.selectNodeContents(e),r.collapse(t?!1:!0)),r.select(!0)}function g(e,t,o){var n=e[t];if("undefined"==typeof o)return n;for(var r=0;n&&r<n.length;r++){if(o.is&&n[r]==o.$)return r;if(r==o)return new CKEDITOR.dom.element(n[r])}return o.is?-1:null}function f(e,t){for(var o=[],n=0;n<e.length;n++){var r=e[n];o.push(r[t]),r[t].rowSpan>1&&(n+=r[t].rowSpan-1)}return o}function b(t,o,n){var r,i=e(t);if((o?1!=i.length:i.length<2)||(r=t.getCommonAncestor())&&r.type==CKEDITOR.NODE_ELEMENT&&r.is("table"))return!1;var a,l=i[0],s=l.getAscendant("table"),u=CKEDITOR.tools.buildTableMap(s),d=u.length,f=u[0].length,b=l.getParent().$.rowIndex,h=g(u,b,l);if(o){var m;try{var p=parseInt(l.getAttribute("rowspan"),10)||1,T=parseInt(l.getAttribute("colspan"),10)||1;m=u["up"==o?b-p:"down"==o?b+p:b]["left"==o?h-T:"right"==o?h+T:h]}catch(v){return!1}if(!m||l.$==m)return!1;i["up"==o||"left"==o?"unshift":"push"](new CKEDITOR.dom.element(m))}for(var E=l.getDocument(),C=b,_=0,I=0,O=!n&&new CKEDITOR.dom.documentFragment(E),D=0,R=0;R<i.length;R++){a=i[R];var w=a.getParent(),S=a.getFirst(),y=a.$.colSpan,K=a.$.rowSpan,A=w.$.rowIndex,x=g(u,A,a);if(D+=y*K,I=Math.max(I,x-h+y),_=Math.max(_,A-b+K),!n){if(c(a),a.getChildren().count()){if(A!=C&&S&&(!S.isBlockBoundary||!S.isBlockBoundary({br:1}))){var k=O.getLast(CKEDITOR.dom.walker.whitespaces(!0));!k||k.is&&k.is("br")||O.append("br")}a.moveChildren(O)}R?a.remove():a.setHtml("")}C=A}if(n)return _*I==D;O.moveChildren(l),l.appendBogus(),I>=f?l.removeAttribute("rowSpan"):l.$.rowSpan=_,_>=d?l.removeAttribute("colSpan"):l.$.colSpan=I;var N=new CKEDITOR.dom.nodeList(s.$.rows),B=N.count();for(R=B-1;R>=0;R--){var L=N.getItem(R);L.$.cells.length||(L.remove(),B++)}return l}function h(t,o){var n=e(t);if(n.length>1)return!1;if(o)return!0;var r,i,a,l,s=n[0],u=s.getParent(),c=u.getAscendant("table"),d=CKEDITOR.tools.buildTableMap(c),f=u.$.rowIndex,b=g(d,f,s),h=s.$.rowSpan;if(h>1){i=Math.ceil(h/2),a=Math.floor(h/2),l=f+i;var m,p=new CKEDITOR.dom.element(c.$.rows[l]),T=g(d,l);r=s.clone();for(var v=0;v<T.length;v++){if(m=T[v],m.parentNode==p.$&&v>b){r.insertBefore(new CKEDITOR.dom.element(m));break}m=null}m||p.append(r)}else{a=i=1,p=u.clone(),p.insertAfter(u),p.append(r=s.clone());for(var E=g(d,f),C=0;C<E.length;C++)E[C].rowSpan++}return r.appendBogus(),s.$.rowSpan=i,r.$.rowSpan=a,1==i&&s.removeAttribute("rowSpan"),1==a&&r.removeAttribute("rowSpan"),r}function m(t,o){var n=e(t);if(n.length>1)return!1;if(o)return!0;var r,i,a,l=n[0],s=l.getParent(),u=s.getAscendant("table"),c=CKEDITOR.tools.buildTableMap(u),d=s.$.rowIndex,b=g(c,d,l),h=l.$.colSpan;if(h>1)i=Math.ceil(h/2),a=Math.floor(h/2);else{a=i=1;for(var m=f(c,b),p=0;p<m.length;p++)m[p].colSpan++}return r=l.clone(),r.insertAfter(l),r.appendBogus(),l.$.colSpan=i,r.$.colSpan=a,1==i&&l.removeAttribute("colSpan"),1==a&&r.removeAttribute("colSpan"),r}var p=/^(?:td|th)$/;CKEDITOR.plugins.tabletools={init:function(t){function r(e){return CKEDITOR.tools.extend(e||{},{contextSensitive:1,refresh:function(e,t){this.setState(t.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function i(e,o){var n=t.addCommand(e,o);t.addFeature(n)}var c=t.lang.table;i("cellProperties",new CKEDITOR.dialogCommand("cellProperties",r({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:"table"}))),CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js"),i("rowDelete",r({requiredContent:"table",exec:function(e){var t=e.getSelection();d(n(t))}})),i("rowInsertBefore",r({requiredContent:"table",exec:function(e){var t=e.getSelection();o(t,!0)}})),i("rowInsertAfter",r({requiredContent:"table",exec:function(e){var t=e.getSelection();o(t)}})),i("columnDelete",r({requiredContent:"table",exec:function(e){var t=e.getSelection(),o=l(t);o&&d(o,!0)}})),i("columnInsertBefore",r({requiredContent:"table",exec:function(e){var t=e.getSelection();a(t,!0)}})),i("columnInsertAfter",r({requiredContent:"table",exec:function(e){var t=e.getSelection();a(t)}})),i("cellDelete",r({requiredContent:"table",exec:function(e){var t=e.getSelection();u(t)}})),i("cellMerge",r({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(e){d(b(e.getSelection()),!0)}})),i("cellMergeRight",r({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(e){d(b(e.getSelection(),"right"),!0)}})),i("cellMergeDown",r({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(e){d(b(e.getSelection(),"down"),!0)}})),i("cellVerticalSplit",r({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(e){d(h(e.getSelection()))}})),i("cellHorizontalSplit",r({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(e){d(m(e.getSelection()))}})),i("cellInsertBefore",r({requiredContent:"table",exec:function(e){var t=e.getSelection();s(t,!0)}})),i("cellInsertAfter",r({requiredContent:"table",exec:function(e){var t=e.getSelection();s(t)}})),t.addMenuItems&&t.addMenuItems({tablecell:{label:c.cell.menu,group:"tablecell",order:1,getItems:function(){var o=t.getSelection(),n=e(o);return{tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:b(o,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:b(o,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:b(o,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:h(o,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:m(o,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_properties:n.length>0?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}},tablecell_insertBefore:{label:c.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:c.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:c.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:c.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:c.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:c.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:c.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:c.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:c.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:c.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:c.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:c.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:c.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:c.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:c.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:c.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:c.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}}),t.contextMenu&&t.contextMenu.addListener(function(e,t,o){var n=o.contains({td:1,th:1},1);return n&&!n.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null})},getSelectedCells:e},CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)}(),CKEDITOR.tools.buildTableMap=function(e){for(var t=e.$.rows,o=-1,n=[],r=0;r<t.length;r++){o++,!n[o]&&(n[o]=[]);for(var i=-1,a=0;a<t[r].cells.length;a++){var l=t[r].cells[a];for(i++;n[o][i];)i++;for(var s=isNaN(l.colSpan)?1:l.colSpan,u=isNaN(l.rowSpan)?1:l.rowSpan,c=0;u>c;c++){n[o+c]||(n[o+c]=[]);for(var d=0;s>d;d++)n[o+c][i+d]=t[r].cells[a]}i+=s-1}}return n},function(){"use strict";function e(){YUI.applyConfig({groups:{AlloyEditor:{base:"alloy-editor/",combine:!1,comboBase:"",modules:o,root:"/alloy-editor/"}}})}function t(){YUI.applyConfig({modules:o})}var o={"alloy-editor":{path:"adapter/yui.js",requires:["base-build","node-base"]},"button-base":{group:"AlloyEditor",path:"buttons/button-base.js",requires:["base-build","plugin","button"]},"button-strong":{group:"AlloyEditor",path:"buttons/button-strong.js",requires:["button-base"]},"button-em":{group:"AlloyEditor",path:"buttons/button-em.js",requires:["button-base"]},"button-strike":{group:"AlloyEditor",path:"buttons/button-strike.js",requires:["button-base"]},"button-subscript":{group:"AlloyEditor",path:"buttons/button-subscript.js",requires:["button-base"]},"button-superscript":{group:"AlloyEditor",path:"buttons/button-superscript.js",requires:["button-base"]},"button-ol":{group:"AlloyEditor",path:"buttons/button-ol.js",requires:["button-base"]},"button-ul":{group:"AlloyEditor",path:"buttons/button-ul.js",requires:["button-base"]},"button-a":{group:"AlloyEditor",path:"buttons/button-a.js",requires:["button-base","event-valuechange","node-focusmanager"]},"button-h1":{group:"AlloyEditor",path:"buttons/button-h1.js",requires:["button-base"]},"button-h2":{group:"AlloyEditor",path:"buttons/button-h2.js",requires:["button-base"]},"button-u":{group:"AlloyEditor",path:"buttons/button-underline.js",requires:["button-base"]},"button-twitterquote":{group:"AlloyEditor",path:"buttons/button-twitterquote.js",requires:["button-base"]},"button-hline":{group:"AlloyEditor",path:"buttons/button-hline.js",requires:["button-base"]},"button-image":{group:"AlloyEditor",path:"buttons/button-image.js",requires:["button-base","node-event-simulate"]},"button-media":{group:"AlloyEditor",path:"buttons/button-media.js",requires:["button-base"]},"button-quote":{group:"AlloyEditor",path:"buttons/button-quote.js",requires:["button-base"]},"button-code":{group:"AlloyEditor",path:"buttons/button-code.js",requires:["button-base"]},"button-twitter":{group:"AlloyEditor",path:"buttons/button-twitter.js",requires:["button-base"]},"button-left":{group:"AlloyEditor",path:"buttons/button-left.js",requires:["button-base"]},"button-right":{group:"AlloyEditor",path:"buttons/button-right.js",requires:["button-base"]},"toolbar-base":{group:"AlloyEditor",path:"toolbars/toolbar-base.js",requires:["plugin","node-base","transition"]},"toolbar-position":{group:"AlloyEditor",path:"toolbars/toolbar-position.js",requires:["node-base"]},"toolbar-add":{group:"AlloyEditor",path:"toolbars/toolbar-add.js",requires:["widget-base","widget-position","widget-position-constrain","widget-position-align","toolbar-base"]},"toolbar-styles":{group:"AlloyEditor",path:"toolbars/toolbar-styles.js",requires:["toolbar-base","widget-base","widget-position","widget-position-constrain"]},"toolbar-image":{group:"AlloyEditor",path:"toolbars/toolbar-image.js",requires:["dom-screen","widget-base","widget-position","widget-position-constrain","toolbar-base"]},"selector-patch":{condition:{trigger:"selector-native"},group:"AlloyEditor",path:"plugins/selector-patch.js"}};
if(YUI&&YUI.GlobalConfig){var n=YUI.GlobalConfig.groups;n&&n.AlloyEditor?t():e()}else e()}(),function(){"use strict";CKEDITOR.plugins.get("linktooltip")||(YUI.add("linktooltip",function(e){var t=e.Lang,o=e.Base.create("linktooltip",e.Widget,[e.WidgetPosition,e.WidgetPositionConstrain,e.WidgetAutohide],{initializer:function(){this._eventHandles=[]},destructor:function(){new e.EventHandle(this._eventHandles).detach()},renderUI:function(){var t;t=e.Node.create(this.TPL_CONTENT),this.get("contentBox").appendChild(t),this._linkPreview=t.one(".link-preview")},bindUI:function(){var t;this._bindBBMouseEnter(),t=this.get("editor"),this._eventHandles.push(e.one(t.element.$).delegate("mouseenter",this._onLinkMouseEnter,"a[href]:not([data-cke-default-link])",this,t)),this.get("boundingBox").on("clickoutside",this._onClickOutside,this)},_bindBBMouseLeave:function(){var e;e=this.get("boundingBox"),this._bbMouseLeaveHandle=e.once("mouseleave",this._onBBMouseLeave,this)},_bindBBMouseEnter:function(){var e;e=this.get("boundingBox"),this._bbMouseEnterHandle=e.on("mouseenter",this._onBBMouseEnter,this)},_attachHiddenHandle:function(){var e=this;this._hideHandle=setTimeout(function(){e.hide()},this.get("hideTimeout"))},_getXY:function(e,o,n){var r,i,a,l,s,u;if(l=parseInt(n.getComputedStyle("lineHeight"),10),r=this.get("gutter"),u=n.get("region"),r=r.top,t.isNumber(l)){for(a=1,s=Math.ceil((u.bottom-u.top)/l),i=1;s>=i&&!(o<u.top+l*i);i++)++a;o=u.top+a*l+r}else o=u.bottom+r;return[e,o]},_onBBMouseEnter:function(){clearTimeout(this._hideHandle),this._bindBBMouseLeave()},_onBBMouseLeave:function(){clearTimeout(this._hideHandle),this._attachHiddenHandle()},_onClickOutside:function(){this.hide()},_onLinkMouseEnter:function(t){var o,n,r,i,a,l=this;this._editMode||(clearTimeout(l._hideHandle),o=t.currentTarget,n=o.getAttribute("href"),i=o.getAttribute("data-cke-tooltip"),r=i?i:n,this._linkPreview.setAttribute("href",n),this._linkPreview.set("innerHTML",e.Escape.html(r)),l.show(),a=l._getXY(t.pageX,t.pageY,o),l.set("xy",a),o.once("mouseleave",function(){clearTimeout(l._hideHandle),l._attachHiddenHandle()}))},BOUNDING_TEMPLATE:'<div class="alloy-editor-tooltip-link"></div>',TPL_CONTENT:'<div class="link-container"><span class="icon-link-container"><i class="alloy-editor-icon-link"></i></span><a class="link-preview" target="_blank"></a></div>'},{ATTRS:{constrain:{validator:t.isBoolean,value:!0},editor:{validator:e.Lang.isObject},gutter:{validator:t.isObject,value:{left:0,top:0}},hideTimeout:{validator:t.isNumber,value:2e3}}});e.LinkTooltip=o},"",{requires:["dom-screen","escape","event-outside","node-event-delegate","event-mouseenter","widget-base","widget-position","widget-position-constrain","widget-autohide"]}),CKEDITOR.plugins.add("linktooltip",{init:function(e){YUI().use("linktooltip",function(t){var o,n;o=t.merge({editor:e,visible:!1},e.config.linktooltip),n=new t.LinkTooltip(o).render(),e.on("destroy",function(){n.destroy()})})}}))}(),function(){"use strict";var e=Object.prototype.hasOwnProperty;CKEDITOR.plugins.get("uiloader")||CKEDITOR.plugins.add("uiloader",{init:function(e){var t,o=this;t=["node-base"].concat(this._getModules(e)),YUI().use(t,function(t){o._createToolbars(t,e),e.fire("toolbarsReady",{toolbars:e.config.toolbars})})},_createToolbars:function(t,o){var n,r,i;n={editor:o,render:o.config.uiNode||!0,visible:!1},i=o.config.toolbars;for(r in i)e.call(i,r)&&(CKEDITOR.tools.isArray(i[r])?o.config.toolbars[r]=new(t[this._getToolbarName(r)])(t.merge(n,{buttons:i[r]})):i[r]&&(o.config.toolbars[r]=new(t[this._getToolbarName(r)])(t.merge(n,i[r]))))},_getButtonName:function(e){var t=e;return"string"!=typeof e&&(t=e.name),t},_getModules:function(t){var o,n,r,i;r=[],i=t.config.toolbars;for(o in i)if(e.call(i,o))if(r.push("toolbar-"+o),CKEDITOR.tools.isArray(i[o]))for(n=i[o].length-1;n>=0;n--)r.push("button-"+this._getButtonName(i[o][n]));else if(i[o])for(n=i[o].buttons.length-1;n>=0;n--)r.push("button-"+this._getButtonName(i[o].buttons[n]));return r},_getToolbarName:function(e){return"Toolbar"+e.substring(0,1).toUpperCase()+e.substring(1)}})}(),YUI.add("selector-patch",function(e){"use strict";e.mix(e.Selector,{test:function(t,o,n){var r,i,a,l,s,u,c,d,g,f,b=!1,h=!1;if(t&&t.tagName)if("function"==typeof o)b=o.call(t,t);else{for(i=o.split(","),n||e.DOM.inDoc(t)||(a=t.parentNode,a?n=a:(u=t.ownerDocument.createDocumentFragment(),u.appendChild(t),n=u,h=!0)),n=n||t.ownerDocument,c=e.Selector._escapeId(e.DOM.getId(t)),c||(r=!0,c=e.guid(),e.DOM.setId(t,c)),d=0;f=i[d++];){for(f+='[id="'+c+'"]',s=e.Selector.query(f,n),g=0;l=s[g++];)if(l===t){b=!0;break}if(b)break}h&&u.removeChild(t),r&&t.removeAttribute("id")}return b}},!0)},"",{requires:["selector-native"]});